<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to determine the cluster number? • FCMm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to determine the cluster number?">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FCMm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Cluster_number_determination.html">How to determine the cluster number?</a>
    </li>
    <li>
      <a href="../articles/Fuzzy_cluster_training.html">How to train the fuzzy cluster?</a>
    </li>
    <li>
      <a href="../articles/New_Data_Running_FCMm.html">How to apply the default FCMm to new data?</a>
    </li>
    <li>
      <a href="../articles/Raster_Running_FCMm.html">The application of FCMm to imagery data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bishun945/FCMm">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to determine the cluster number?</h1>
                        <h4 class="author">Shun Bi</h4>
            
            <h4 class="date">2020-01-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bishun945/FCMm/blob/master/vignettes/Cluster_number_determination.Rmd"><code>vignettes/Cluster_number_determination.Rmd</code></a></small>
      <div class="hidden name"><code>Cluster_number_determination.Rmd</code></div>

    </div>

    
    
<div id="lists-of-vignettes-showing-how-to-use-fcmm" class="section level1">
<h1 class="hasAnchor">
<a href="#lists-of-vignettes-showing-how-to-use-fcmm" class="anchor"></a>Lists of vignettes showing how to use FCMm</h1>
<p>Dear users, the four vignettes of <code>FCMm</code> were provided in this package to demonstrate the usage and application to obtain the cluster number, to train the user-defined data set, to apply the default FCMm to new data (such as Chla concentration estimation), and the imagery data.</p>
<p>Here are the step-by-step demos:</p>
<ul>
<li><a href="./doc/Cluster_number_determination.html"><strong>Demo_1: How to determine the cluster number?</strong></a></li>
<li><a href="./doc/Fuzzy_cluster_training.html">Demo_2: How to train the fuzzy cluster?</a></li>
<li><a href="./doc/New_Data_Running_FCMm.html">Demo_3: How to apply the default FCMm to new data?</a></li>
<li><a href="./doc/Raster_Running_FCMm.html">Demo_4: The application of FCMm to imagery data.</a></li>
</ul>
</div>
<div id="preparing-the-data-set" class="section level1">
<h1 class="hasAnchor">
<a href="#preparing-the-data-set" class="anchor"></a>Preparing the data set</h1>
<p>This Vignette shows how to use the <code>FCMm</code> package to determine the optimized cluster number about your data set. Here we use our demo data <code>Nechad2015</code>.</p>
<p><strong>Note</strong>: we also need package <code>tidyverse</code> to string and data processing.</p>
<div id="dataframe-process" class="section level2">
<h2 class="hasAnchor">
<a href="#dataframe-process" class="anchor"></a>Dataframe process</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(<span class="dt">list=</span><span class="kw"><a href="https://rdrr.io/r/base/ls.html">ls</a></span>())</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(FCMm)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"Nechad2015"</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">w &lt;-<span class="st"> </span>Nechad2015 <span class="op">%&gt;%</span><span class="st"> </span>names <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="st">  </span><span class="kw">str_extract</span>(.,<span class="dt">pattern=</span><span class="st">"</span><span class="ch">\\</span><span class="st">d"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="st">  </span>is.na <span class="op">%&gt;%</span><span class="st"> </span>{<span class="op">!</span>.}</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">wv &lt;-<span class="st"> </span>w <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(Nechad2015)[.] <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">'X'</span>,<span class="st">''</span>,.) <span class="op">%&gt;%</span><span class="st"> </span>as.numeric</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">x &lt;-<span class="st"> </span>w <span class="op">%&gt;%</span><span class="st"> </span>Nechad2015[,.]</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(x) &lt;-<span class="st"> </span>wv</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="kw"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(w)</a></code></pre></div>
</div>
<div id="spectra-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#spectra-plot" class="anchor"></a>Spectra plot</h2>
<p>After that, we subset the Rrs dataframe (named <code>x</code>) and wavelength vector (named <code>wv</code>). It is time to plot the spectra of this set by using function <code>plot_spec_from_df</code>.</p>
<p><strong>Note</strong>: The input of <code>plot_spec_from_df</code> should be a matrix or data.frame with colnames that could be transformed into the numeric — as the x-axis of the plot. Since the return of <code>plot_spec_from_df</code> is a <code>ggplot</code> list, you could modify or add it for your purpose (such as add labs or themes).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">p.spec &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plot_spec_from_df.html">plot_spec_from_df</a></span>(x) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">'Wavelength (nm)'</span>,<span class="dt">y=</span><span class="kw"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(Rrs<span class="op">~</span>(sr<span class="op">^-</span><span class="dv">1</span>))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">'none'</span>, <span class="dt">text=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(p.spec)</a></code></pre></div>
<p><img src="Cluster_number_determination_files/figure-html/unnamed-chunk-2-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="fcm-preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#fcm-preparation" class="anchor"></a>FCM preparation</h2>
<p>Before optimizing the best cluster number, we have to obtain an FD list produced by function <code>FuzzifierDetermination</code> just as follow</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">FD &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FuzzifierDetermination.html">FuzzifierDetermination</a></span>(x, wv, <span class="dt">stand=</span>F)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(FD)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;         Length Class  Mode     </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; x       3024   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; x.stand 3024   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; wv         9   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; max.m      1   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; stand      1   -none- logical  </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; dmetric    1   -none- character</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; Area     336   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; m.ub       1   -none- numeric  </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; m.used     1   -none- numeric</span></a></code></pre></div>
<p><code>FD</code> list contains several result by <code>FuzzifierDetermination</code>:</p>
<ul>
<li>
<em>x</em>: the raw input Rrs dataframe with unit sr^-1</li>
<li>
<em>x.stand</em>: the standardized Rrs dataframe, if <code>stand=F</code>
</li>
<li>
<em>wv</em>: wavelength with unit nm</li>
<li>
<em>max.m</em>: the maximum fuzzifier of FCM as a restriction</li>
<li>
<em>stand</em>: logic value for choosing whether to use standardization</li>
<li>
<em>dmetric</em>: string value for choosing which distance metric to be used</li>
<li>
<em>Area</em>: numeric vector for trapezoidal integral values</li>
<li>
<em>m.ub</em>: the upper boundary of fuzzifier(m) value</li>
<li>
<em>m.used</em>: the desired value of fuzzifier(m) value</li>
</ul>
</div>
</div>
<div id="optimizing-the-best-cluster-number" class="section level1">
<h1 class="hasAnchor">
<a href="#optimizing-the-best-cluster-number" class="anchor"></a>Optimizing the best cluster number</h1>
</div>
<div id="validate-functions-or-metrics" class="section level1">
<h1 class="hasAnchor">
<a href="#validate-functions-or-metrics" class="anchor"></a>validate functions or metrics</h1>
<p>Here I gonna introduce several famous cluster validate metrics such as <code>SIL.F</code>, <code>PE</code>, <code>PC</code>, and <code>MPC</code>.</p>
<p>In brief, these metrics mean the goodness of cluster results. Except for <code>PE</code>, the larger of <code>SIL.F</code>, <code>PC</code>, and <code>MPC</code>, the better of the cluster at that time. If you are more interested in that, please see more details in the document of package <code>ppclust</code> by Zeynel Cebeci and <code>fclust</code> by Paolo Giordani. Package <code>FCMm</code> has been inspired by them a lot, and I’m very grateful.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">FD &lt;-<span class="st"> </span>x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="co"># sample_n(., size=300) %&gt;%</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/FuzzifierDetermination.html">FuzzifierDetermination</a></span>(., wv, <span class="dt">stand=</span>F)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">nb_min &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">nb_max &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">idxsf &lt;-<span class="st"> </span>idxpe &lt;-<span class="st"> </span>idxpc &lt;-<span class="st"> </span>idxmpc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(nb_min,nb_max,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">i &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="cf">for</span>(nb <span class="cf">in</span> nb_min<span class="op">:</span>nb_max){</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">  res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FCM.new.html">FCM.new</a></span>(FD, nb, <span class="dt">fast.mode=</span>T) <span class="co"># open the fast mode</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">  <span class="co"># print(res$p.jitter)</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">  tmp &lt;-<span class="st"> </span>ppclust<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ppclust/man/ppclust2.html">ppclust2</a></span>(res<span class="op">$</span>res.FCM,<span class="dt">otype=</span><span class="st">"fclust"</span>)</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">  idxsf[i] &lt;-<span class="st"> </span>fclust<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fclust/man/SIL.F.html">SIL.F</a></span>(tmp<span class="op">$</span>Xca, tmp<span class="op">$</span>U, <span class="dt">alpha=</span><span class="dv">1</span>) <span class="co"># optimal with maximum value</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14">  idxpe[i] &lt;-<span class="st"> </span>fclust<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fclust/man/PE.html">PE</a></span>(tmp<span class="op">$</span>U) <span class="co"># optimal with minimum value</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">  idxpc[i] &lt;-<span class="st"> </span>fclust<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fclust/man/PC.html">PC</a></span>(tmp<span class="op">$</span>U) <span class="co"># optimal with maximum value</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">  idxmpc[i] &lt;-<span class="st"> </span>fclust<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fclust/man/MPC.html">MPC</a></span>(tmp<span class="op">$</span>U) <span class="co"># optimal with maximum value</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb4-19" data-line-number="19"></a>
<a class="sourceLine" id="cb4-20" data-line-number="20">dt &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">nb=</span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(nb_min,nb_max,<span class="dv">1</span>),idxsf,idxpe,idxpc,idxmpc)</a>
<a class="sourceLine" id="cb4-21" data-line-number="21">opt.num &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(dt,<span class="dv">2</span>,which.max)[<span class="op">-</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">3</span>)]<span class="op">+</span><span class="dv">1</span>,<span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(dt,<span class="dv">2</span>,which.min)[<span class="dv">3</span>]<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-22" data-line-number="22"></a>
<a class="sourceLine" id="cb4-23" data-line-number="23">dt <span class="op">%&gt;%</span><span class="st"> </span>reshape2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/reshape2/man/melt.html">melt</a></span>(., <span class="dt">id=</span><span class="st">'nb'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">data=</span>.,<span class="kw">aes</span>(<span class="dt">x=</span>nb,<span class="dt">y=</span>value,<span class="dt">group=</span>variable,<span class="dt">color=</span>variable)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="st">  </span><span class="kw">geom_path</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>variable, <span class="dt">scales=</span><span class="st">'free_y'</span>, <span class="dt">nrow=</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>), <span class="dt">legend.position=</span><span class="st">'none'</span>)</a></code></pre></div>
<p><img src="Cluster_number_determination_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Back to the code, here we assume the best cluster number is ranging from 3 to 10 (maybe out of this range but is so weird to obtain such large number). Then we calculate every validate metrics and record them into their corresponding vectors. Finally, we will obtain the goodness curve of cluster results changing with cluster number.</p>
<p><strong>Note</strong>: the process is a bootstrapping way to obtain the objective result. So it will take such a long time. Well! We select <code>4</code> as the best cluster number.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#lists-of-vignettes-showing-how-to-use-fcmm">Lists of vignettes showing how to use FCMm</a></li>
      <li>
<a href="#preparing-the-data-set">Preparing the data set</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dataframe-process">Dataframe process</a></li>
      <li><a href="#spectra-plot">Spectra plot</a></li>
      <li><a href="#fcm-preparation">FCM preparation</a></li>
      </ul>
</li>
      <li><a href="#optimizing-the-best-cluster-number">Optimizing the best cluster number</a></li>
      <li><a href="#validate-functions-or-metrics">validate functions or metrics</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Shun Bi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
